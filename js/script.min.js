const form=document.getElementById("form"),originInputValue=document.getElementById("originInput"),destinationInputValue=document.getElementById("destinationInput"),departureDateValue=document.getElementById("departureDate"),returnDateValue=document.getElementById("returnDate"),currencyValue=document.getElementById("currency"),button=document.getElementById("button"),airlineP=document.getElementById("airline-p"),originP=document.getElementById("origin-p"),destinationP=document.getElementById("destination-p"),departureP=document.getElementById("departure-p"),returnP=document.getElementById("return-p"),priceP=document.getElementById("price-p"),flightP=document.getElementById("flight-p"),transfersP=document.getElementById("transfers-p"),contentBody=document.getElementById("contentBody"),content=document.querySelector(".content"),contentOutput=document.createElement("div");contentOutput.setAttribute("class","content__output");const contentOutputDiv=document.createElement("div");contentOutputDiv.setAttribute("class","content__output-body"),content.appendChild(contentOutput),form.addEventListener("submit",getFromValue);let div=document.createElement("div");function getFromValue(e){e.preventDefault();const t={OriginCity:originInputValue.value,DestinationCity:destinationInputValue.value,DepartureDate:departureDateValue.value,ReturnDate:returnDateValue.value,Currency:currencyValue.value};let n=null;n=`https://floating-sea-73933.herokuapp.com/https://api.travelpayouts.com/v1/prices/calendar?calendar_type=departure_date&origin=${t.OriginCity}&destination=${t.DestinationCity}&depart_date=${t.DepartureDate}&return_date=${t.ReturnDate}&currency=${t.Currency}&token=1b74596b5a8f332ac7268a410709eca6`;const r=new XMLHttpRequest;r.addEventListener("readystatechange",(function(){if(this.readyState===this.DONE){var e=JSON.parse(this.responseText);const m=e.data,s=e.currency,y=(Object.keys(m),Object.values(m));let h=document.createElement("table"),E=document.createElement("thead"),C=document.createElement("tbody");h.appendChild(E),h.appendChild(C);let g=document.createElement("tr"),D=document.createElement("th");D.innerHTML="Airline";let v=document.createElement("th");v.innerHTML="Origin City";let A=document.createElement("th");A.innerHTML="Destination City";let I=document.createElement("th");I.innerHTML="Flight Number";let H=document.createElement("th");H.innerHTML="Departure Date";let B=document.createElement("th");B.innerHTML="Return Date";let O=document.createElement("th");O.innerHTML="Price";let T=document.createElement("div");for(var t=0;t<y.length;t++){T.setAttribute("class","parent-div");var n=y[t].departure_at;depDateArray=n.split("");var r=depDateArray.slice(0,4).join(""),a=depDateArray.slice(5,7).join(""),d=depDateArray.slice(8,10).join(""),i=depDateArray.slice(11,16).join(""),l=y[t].return_at;retDateArray=l.split("");var c=retDateArray.slice(0,4).join(""),u=retDateArray.slice(5,7).join(""),o=retDateArray.slice(8,10).join(""),p=retDateArray.slice(11,16).join("");g.appendChild(D),g.appendChild(v),g.appendChild(A),g.appendChild(I),g.appendChild(H),g.appendChild(B),g.appendChild(O),E.appendChild(g);let e=document.createElement("tr"),m=document.createElement("td");m.innerHTML=`${y[t].airline}`;let $=document.createElement("td");$.innerHTML=`${y[t].origin}`;let L=document.createElement("td");L.innerHTML=`${y[t].destination}`;let b=document.createElement("td");b.innerHTML=`${y[t].flight_number}`;let M=document.createElement("td");M.innerHTML=`${d}-${a}-${r} ${i}`;let f=document.createElement("td");f.innerHTML=`${o}-${u}-${c} ${p}`;let V=document.createElement("td");V.innerHTML=`${y[t].price} ${s}`,e.appendChild(m),e.appendChild($),e.appendChild(L),e.appendChild(b),e.appendChild(M),e.appendChild(f),e.appendChild(V),C.appendChild(e),T.appendChild(h),contentOutput.appendChild(contentOutputDiv)}contentOutputDiv.appendChild(T)}})),r.open("GET",n),r.setRequestHeader("Access-Control-Allow-Origin","*"),r.setRequestHeader("Access-Control-Allow-Credentials","true"),r.setRequestHeader("Access-Control-Allow-Headers","content-type","Authorization"),r.setRequestHeader("Access-Control-Allow-Methods","POST, GET, OPTIONS"),r.setRequestHeader("Access-Control-Allow-Headers","X-Requested-With, content-type"),r.send(t)}contentBody.appendChild(div),div.setAttribute("class","created-div");